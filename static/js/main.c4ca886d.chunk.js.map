{"version":3,"sources":["Game/config.js","Game/Buttons.js","Game/Nav/InfectionLevel.js","Game/Nav/index.js","Game/City.js","Game/DeckAndDiscard.js","Game/EpidemicModal.js","Game/index.js","SiteNav.js","serviceWorker.js","index.js"],"names":["INFECTION_AMOUNTS","CITY_COLOR","CITY_NAMES_BY_COLOR","SEASON_1_CITIES","Object","entries","map","color","name","frequency","reduce","cities","citiesForColor","ButtonBase","styled","button","PrimaryButton","TextButton","InfectionStage","div","ActiveInfectionStage","Container","Title","InfectionLevel","level","openEpidemicModal","infectionAmount","index","key","onClick","Nav","resetGame","infectionLevel","CSS_COLOR","CityInfo","CityStats","Probability","span","City","city","probabilities","onCityClick","bind","probability","CardGroup","CardGroupTitle","DiscardPile","CityCards","deck","discardPile","getProbabilities","playCityCard","values","deckSection","sectionIndex","isVisible","ModalMask","ModalBody","ModalTitle","SearchInput","input","EpidemicModal","close","triggerEpidemic","React","useState","search","setSearch","bottomDeckSection","length","filteredCities","filter","indexOf","hasNoResults","value","onChange","event","target","placeholder","Game","probabilityCache","setProbabilityCache","setDeck","setDiscardPile","setInfectionLevel","isShowingEpidemicModal","setIsShowingEpidemicModal","moveCityToDiscardFromDeckSection","cardIndex","splice","cityCopy","closeEpidemicModal","getSizeOfSection","deckSectionIndex","section","numCards","cityIndex","DeckAndDiscard","probabilityCacheHash","cardsBeforeSection","cardsPicked","cardsInSection","push","probabilityToNotChoose","chosenInSet","Math","min","decimalPlaceAdjust","pow","round","generateProbabilities","hasAtLeastOnePrediction","accumulator","discardCopy","Logo","CreatedBy","SiteNav","href","rel","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.c4ca886d.chunk.js","sourcesContent":["export const INFECTION_AMOUNTS = [2, 2, 2, 3, 3, 4, 4]\nexport const MAX_DECIMAL_PLACES = 2\nexport const NUM_PREDICTIONS = 3\n\nexport const CITY_COLOR = {\n\tRED: 'red',\n\tBLUE: 'blue',\n\tBLACK: 'black',\n\tYELLOW: 'yellow',\n}\n\nexport const CITY_NAMES_BY_COLOR = {\n\t[CITY_COLOR.RED]: [\n\t\t'Beijing',\n\t\t'Seoul',\n\t\t'Shanghai',\n\t\t'Hong Kong',\n\t\t'Tokyo',\n\t\t'Osaka',\n\t\t'Taipei',\n\t\t'Bangkok',\n\t\t'Ho Chi Minh City',\n\t\t'Jakarta',\n\t\t'Manila',\n\t\t'Sydney',\n\t],\n\t[CITY_COLOR.BLUE]: [\n\t\t'San Francisco',\n\t\t'Chicago',\n\t\t'Montreal',\n\t\t'New York',\n\t\t'Atlanta',\n\t\t'Washington',\n\t\t'Madrid',\n\t\t'London',\n\t\t'Paris',\n\t\t'Essen',\n\t\t'Milan',\n\t\t'St. Petersburg',\n\t],\n\t[CITY_COLOR.BLACK]: [\n\t\t'Los Angeles',\n\t\t'Mexico City',\n\t\t'Miami',\n\t\t'Bogota',\n\t\t'Lima',\n\t\t'Sao Paulo',\n\t\t'Buenos Aires',\n\t\t'Santiago',\n\t\t'Lagos',\n\t\t'Kinshasa',\n\t\t'Khartoum',\n\t\t'Johannesburg',\n\t],\n\t[CITY_COLOR.YELLOW]: [\n\t\t'Algiers',\n\t\t'Cairo',\n\t\t'Baghdad',\n\t\t'Istanbul',\n\t\t'Moscow',\n\t\t'Tehran',\n\t\t'Delhi',\n\t\t'Kolkata',\n\t\t'Chennai',\n\t\t'Mumbai',\n\t\t'Karachi',\n\t\t'Riyadh',\n\t],\n}\n\nexport const SEASON_1_CITIES = Object.entries(CITY_NAMES_BY_COLOR)\n\t.map(\n\t\t([color, cities]) => cities.map(\n\t\t\tname => ({\n\t\t\t\tname,\n\t\t\t\tcolor,\n\t\t\t\tfrequency: 1,\n\t\t\t})\n\t\t)\n\t)\n\t.reduce((cities, citiesForColor) => [...cities, ...citiesForColor], [])\n","import styled from 'styled-components'\n\nconst ACTIVE_COLOR = '#FACD01'\n\nconst ButtonBase = styled.button`\n\toutline: none;\n`\n\nexport const PrimaryButton = styled(ButtonBase)`\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\twidth: calc(100% + 0.5em);\n\t\theight: 0;\n\t\tborder-top: 0.35em dashed black;\n\t\tposition: absolute;\n\t\ttransform: skew(45deg);\n\t\tleft: -0.25em;\n\t\ttop: 0;\n\t}\n\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\toverflow: hidden;\n\tborder-radius: 0.15em;\n\tbackground: ${ACTIVE_COLOR};\n\tborder: none;\n\tpadding: 0.75em 0.5em 0.45em;\n\tfont-weight: bold;\n\ttext-transform: uppercase;\n`\n\nexport const TextButton = styled(ButtonBase)`\n\tdisplay: block;\n\tbackground: transparent;\n\tpadding: 0.5em;\n\tfont-weight: bold;\n\ttext-transform: uppercase;\n\tborder: none;\n\tcolor: white;\n\ttext-decoration: underline;\n\tcursor: pointer;\n\ttransition: color 0.2s;\n\n\t&:hover {\n\t\tcolor: ${ACTIVE_COLOR};\n\t}\n`\n","import React from 'react'\nimport { INFECTION_AMOUNTS } from '../config'\nimport styled from 'styled-components'\nimport { PrimaryButton } from '../Buttons'\n\nexport const COLOR_INFECTION = '#39AC6C'\n\nconst InfectionStage = styled.div`\n\twidth: 2em;\n\theight: 2em;\n\tborder-radius: 50%;\n\tbackground: ${COLOR_INFECTION}55;\n\tborder: 0.2em solid ${COLOR_INFECTION}AA;\n\ttext-align: center;\n\tline-height: 2em;\n\tfont-weight: bold;\n\tcolor: ${COLOR_INFECTION}AA;\n\tmargin-right: 0.35em;\n`\n\nconst ActiveInfectionStage = styled(InfectionStage)`\n\tbackground: ${COLOR_INFECTION};\n\tcolor: white;\n`\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n`\n\nconst Title = styled.div`\n\tcolor: white;\n\tfont-weight: bold;\n\tfont-size: 1.25rem;\n\ttext-transform: uppercase;\n\tline-height: 1;\n\tmargin-right: 0.35em;\n`\n\nconst InfectionLevel = ({ level, openEpidemicModal }) => (\n\t<Container>\n\t\t<Title>Infection Level</Title>\n\t\t{\n\t\t\tINFECTION_AMOUNTS.map((infectionAmount, index) => level === index\n\t\t\t\t? <ActiveInfectionStage key={index}>{infectionAmount}</ActiveInfectionStage>\n\t\t\t\t: <InfectionStage key={index}>{infectionAmount}</InfectionStage>\n\t\t\t)\n\t\t}\n\t\t<PrimaryButton onClick={openEpidemicModal}>Trigger Epidemic</PrimaryButton>\n\t</Container>\n)\n\nexport default InfectionLevel","import React from 'react'\nimport styled from 'styled-components'\n\nimport InfectionLevel from './InfectionLevel'\nimport { TextButton } from '../Buttons'\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding: 0.5em;\n`\n\nconst Nav = ({\n\tresetGame,\n\tinfectionLevel,\n\topenEpidemicModal,\n}) => {\n\treturn (\n\t\t<Container>\n\t\t\t<InfectionLevel level={infectionLevel} openEpidemicModal={openEpidemicModal} />\n\t\t\t<TextButton onClick={resetGame}>Reset Game</TextButton>\n\t\t</Container>\n\t)\n}\n\nexport default Nav","import React from 'react'\nimport styled from 'styled-components'\n\nimport { CITY_COLOR } from './config'\n\nconst CSS_COLOR = {\n\t[CITY_COLOR.RED]: '#d20404',\n\t[CITY_COLOR.BLUE]: '#38359a',\n\t[CITY_COLOR.BLACK]: '#000000',\n\t[CITY_COLOR.YELLOW]: '#d2ba00',\n}\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbackground: ${({ color }) => CSS_COLOR[color]}55;\n\tpadding: 0.75em 1em;\n\tcursor: pointer;\n\tcolor: white;\n\ttransition: background 0.2s;\n\n\t&:first-of-type {\n\t\tborder-top-left-radius: 0.25em;\n\t\tborder-top-right-radius: 0.25em;\n\t}\n\n\t&:last-of-type {\n\t\tborder-bottom-left-radius: 0.25em;\n\t\tborder-bottom-right-radius: 0.25em;\n\t}\n\n\t&:hover {\n\t\tbackground: ${({ color }) => CSS_COLOR[color]}99;\n\t}\n`\n\nconst CityInfo = styled.div`\n\ttext-transform: uppercase;\n`\n\nconst CityStats = styled.div`\n\n`\n\nconst Probability = styled.span`\n\tmargin-left: 1em;\n\tfont-size: 0.75em;\n\n\t&:nth-of-type(2) {\n\t\topacity: 0.7;\n\t}\n\n\t&:nth-of-type(3) {\n\t\topacity: 0.4;\n\t}\n`\n\nconst City = ({\n\tcity,\n\tprobabilities,\n\tonClick,\n}) => {\n\tconst onCityClick = onClick\n\t\t? onClick.bind(null, city)\n\t\t: null\n\n\treturn (\n\t\t<Container onClick={onCityClick} color={city.color}>\n\t\t\t<CityInfo>\n\t\t\t\t{city.name}\n\t\t\t\t<span>{city.frequency > 1 ? `(${city.frequency})` : ''}</span>\n\t\t\t</CityInfo>\n\t\t\t<CityStats>\n\t\t\t\t{probabilities && probabilities.map((probability, index) => (\n\t\t\t\t\t<Probability key={index}>{probability}%</Probability>\n\t\t\t\t))}\n\t\t\t</CityStats>\n\t\t</Container>\n\t)\n}\n\nexport default City","import React from 'react'\nimport styled from 'styled-components'\n\nimport City from './City'\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin-top: 1.5em;\n`\n\nconst CardGroup = styled.div`\n\twidth: 20em;\n\tpadding: 0 1em;\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nconst CardGroupTitle = styled.div`\n\tmargin-bottom: 0.55em;\n\tcolor: #FFFFFFAA;\n\ttext-transform: uppercase;\n`\n\nconst DiscardPile = styled(CardGroup)`\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: calc(100% + 0.5em);\n\t\twidth: 0;\n\t\tborder-right: 0.35em dashed #FFFFFF22;\n\t\tposition: absolute;\n\t\ttransform: skew(0, 45deg);\n\t\tright: -1.1em;\n\t\ttop: 0;\n\t}\n\n\tposition: relative;\n\tmargin-right: 2em;\n`\n\nconst CityCards = ({\n\tdeck,\n\tdiscardPile,\n\tgetProbabilities,\n\tplayCityCard,\n}) => {\n\treturn (\n\t\t<Container>\n\t\t\t<DiscardPile key=\"Discard Pile\">\n\t\t\t\t<CardGroupTitle>Discard</CardGroupTitle>\n\t\t\t\t{Object.values(discardPile).map(city => <City city={city} />)}\n\t\t\t</DiscardPile>\n\n\t\t\t{/* TODO: ADD INPUT SEARCH */}\n\t\t\t{deck.map((deckSection, sectionIndex) => (\n\t\t\t\t<CardGroup key={sectionIndex}>\n\t\t\t\t\t<CardGroupTitle>\n\t\t\t\t\t\t{sectionIndex === 0 ? 'Top deck section' : `Section ${sectionIndex + 1}`}\n\t\t\t\t\t</CardGroupTitle>\n\t\t\t\t\t{deckSection.map((city, index) => (\n\t\t\t\t\t\t<City\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tcity={city}\n\t\t\t\t\t\t\tprobabilities={getProbabilities(sectionIndex, city.frequency)}\n\t\t\t\t\t\t\tonClick={playCityCard}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CardGroup>\n\t\t\t))}\n\t\t</Container>\n\t)\n}\n\nexport default CityCards\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport City from './City'\n\nconst Container = styled.div`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding-top: ${({ isVisible }) => isVisible ? '5vh' : '0'};\n\ttransition: opacity 0.5s, z-index 0.5s, padding-top 0.4s;\n\topacity: ${({ isVisible }) => isVisible ? '1' : '0'};\n\tz-index: ${({ isVisible }) => isVisible ? '100' : '-1'};\n`\n\nconst ModalMask = styled.div`\n\tbackground: #000000BB;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tz-index: -1;\n`\n\nconst ModalBody = styled.div`\n\tmax-width: 30em;\n\tmax-height: 90vh;\n\twidth: 100%;\n\tbackground: #394756;\n\tborder-radius: 0.2em;\n\tpadding: 1em;\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nconst ModalTitle = styled.div`\n\tfont-size: 1.5em;\n\ttext-transform: uppercase;\n\tcolor: white;\n\tmargin-bottom: 0.75em;\n`\n\nconst SearchInput = styled.input`\n\tfont-size: 1em;\n\tpadding: 0.25em 0.5em;\n\tbackground: #FFFFFFCC;\n\tborder: 0;\n\tborder-radius: 0.2em;\n\tmargin-bottom: 1em;\n\n\t&:focus {\n\t\toutline: none;\n\t}\n`\n\nconst EpidemicModal = ({ isVisible, close, deck, triggerEpidemic }) => {\n\tconst [search, setSearch] = React.useState('')\n\tconst bottomDeckSection = deck[deck.length - 1]\n\tconst filteredCities = search\n\t\t? bottomDeckSection.filter(city => city.name.indexOf(search) >= 0)\n\t\t: []\n\tconst hasNoResults = search && filteredCities.length === 0\n\n\tconst searchChange = event => {\n\t\tsetSearch(event.target.value)\n\t}\n\tconst closeAndReset = () => {\n\t\tsetSearch('')\n\t\tclose()\n\t}\n\n\treturn (\n\t\t<Container isVisible={isVisible}>\n\t\t\t<ModalMask onClick={closeAndReset}/>\n\t\t\t<ModalBody>\n\t\t\t\t<ModalTitle>Epidemic!</ModalTitle>\n\t\t\t\t<SearchInput value={search} onChange={searchChange} placeholder=\"Search for a city\" />\n\t\t\t\t{hasNoResults\n\t\t\t\t\t? <span>No cities found</span>\n\t\t\t\t\t: filteredCities.map(city => (\n\t\t\t\t\t\t<City key={city.name} city={city} onClick={triggerEpidemic} />\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</ModalBody>\n\t\t</Container>\n\t)\n}\n\nexport default EpidemicModal","import React from 'react'\nimport styled from 'styled-components'\n\nimport Nav from './Nav'\nimport DeckAndDiscard from './DeckAndDiscard'\nimport EpidemicModal from './EpidemicModal'\nimport {\n\tINFECTION_AMOUNTS,\n\tNUM_PREDICTIONS,\n\tMAX_DECIMAL_PLACES,\n\tSEASON_1_CITIES,\n} from './config'\n\nconst Container = styled.div`\n\tbackground: #394756;\n\tpadding: 1em 1em 4em;\n`\n\nconst Game = () => {\n\tconst [probabilityCache, setProbabilityCache] = React.useState({})\n\tconst [deck, setDeck] = React.useState([SEASON_1_CITIES])\n\tconst [discardPile, setDiscardPile] = React.useState({})\n\tconst [infectionLevel, setInfectionLevel] = React.useState(0)\n\tconst [isShowingEpidemicModal, setIsShowingEpidemicModal] = React.useState(false)\n\n\tconst infectionAmount = INFECTION_AMOUNTS[infectionLevel]\n\n\tconst moveCityToDiscardFromDeckSection = (sectionIndex, city) => {\n\t\tconst cardIndex = deck[sectionIndex].indexOf(city)\n\n\t\t// We only want to allow pulling off of specified section\n\t\tif (cardIndex === -1) {\n\t\t\t\treturn;\n\t\t}\n\n\t\t// Lower the amount of this card\n\t\tdeck[sectionIndex][cardIndex].frequency--\n\n\t\t// If it was the last one remove it\n\t\tif (deck[sectionIndex][cardIndex].frequency === 0) {\n\t\t\t\tdeck[sectionIndex].splice(cardIndex, 1);\n\t\t}\n\n\t\t// If the section is empty, delete it\n\t\tif (deck[sectionIndex].length === 0) {\n\t\t\t\tdeck.splice(0, 1);\n\t\t}\n\n\t\t// If this city is not in the discard already, add it\n\t\tif (!discardPile[city.name]) {\n\t\t\t\tlet cityCopy = {\n\t\t\t\t\t...city,\n\t\t\t\t\tfrequency: 0,\n\t\t\t\t}\n\n\t\t\t\tdiscardPile[city.name] = cityCopy;\n\t\t}\n\n\t\tdiscardPile[city.name].frequency++\n\n\t\tsetDiscardPile(discardPile)\n\t\tsetDeck(deck)\n\t}\n\n\tconst openEpidemicModal = () => {\n\t\tsetIsShowingEpidemicModal(true)\n\t}\n\n\tconst closeEpidemicModal = () => {\n\t\tsetIsShowingEpidemicModal(false)\n\t}\n\n\tconst playCityCard = city => {\n\t\tmoveCityToDiscardFromDeckSection(0, city);\n\t\tsetProbabilityCache({})\n\n\t\t// TODO SAVE GAME STATE\n\t}\n\n\tconst triggerEpidemic = city => {\n\t\tmoveCityToDiscardFromDeckSection(deck.length - 1, city);\n\n\t\tconst discardCopy = Object.values(discardPile);\n\t\tsetDeck([\n\t\t\tdiscardCopy,\n\t\t\t...deck,\n\t\t])\n\n\t\tsetInfectionLevel(infectionLevel + 1)\n\t\tsetDiscardPile({})\n\t\tsetProbabilityCache({}) // this.generateProbabilitiesForFullDeck()\n\n\t\tcloseEpidemicModal()\n\t}\n\n\tconst getSizeOfSection = deckSectionIndex => {\n\t\tlet section = deck[deckSectionIndex];\n\t\tlet numCards = 0;\n\n\t\tfor (let cityIndex = 0; cityIndex < section.length; cityIndex++) {\n\t\t\tlet city = section[cityIndex]\n\t\t\tnumCards += city.frequency\n\t\t}\n\n\t\treturn numCards\n\t}\n\n\tconst generateProbabilities = (deckSection, frequency) => {\n\t\tlet cardsBeforeSection = 0\n\t\tlet probabilities = []\n\t\tlet cardsPicked = 0\n\t\tlet cardsInSection = getSizeOfSection(deckSection)\n\n\t\tfor (let section = 0; section < deckSection; section++) {\n\t\t\t\tcardsBeforeSection += getSizeOfSection(section)\n\t\t}\n\n\t\twhile (probabilities.length < NUM_PREDICTIONS && cardsInSection > 0) {\n\t\t\t// If the next set is not even in this section, add 0\n\t\t\tif (cardsPicked + infectionAmount <= cardsBeforeSection) {\n\t\t\t\tprobabilities.push(0);\n\t\t\t\tcardsPicked += infectionAmount;\n\t\t\t}\n\t\t\t// Else we have the chance to pull this card\n\t\t\telse {\n\t\t\t\t// The city has to get picked\n\t\t\t\tif (cardsInSection < infectionAmount) {\n\t\t\t\t\t\tprobabilities.push(100);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlet probabilityToNotChoose = 1;\n\t\t\t\t\t/*\n\t\t\t\t\t  n - f       n - 1 - f       n - 2 - f\n\t\t\t\t\t -------  *  -----------  *  ----------- * ...\n\t\t\t\t\t    n           n - 1           n - 2\n\t\t\t\t\t*/\n\t\t\t\t\tfor (let chosenInSet = 0; chosenInSet < infectionAmount; chosenInSet++) {\n\t\t\t\t\t\t\tprobabilityToNotChoose *= (cardsInSection - chosenInSet - frequency) / (cardsInSection - chosenInSet)\n\t\t\t\t\t}\n\n\t\t\t\t\tlet probability = Math.min(1.0 - probabilityToNotChoose, 1.0)\n\t\t\t\t\tlet decimalPlaceAdjust = Math.pow(10, MAX_DECIMAL_PLACES)\n\t\t\t\t\tprobabilities.push(Math.round(probability * 100 * decimalPlaceAdjust) / decimalPlaceAdjust)\n\t\t\t\t}\n\n\t\t\t\tif (probabilities[probabilities.length - 1] === 100) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcardsInSection -= infectionAmount\n\t\t\t}\n\t\t}\n\n\t\treturn probabilities\n\t}\n\n\tconst getProbabilitiesForDeckSectionAndFrequency = (deckSection, frequency) => {\n\t\tconst probabilityCacheHash = `${deckSection}-${frequency}`\n\n\t\tif (!probabilityCache[probabilityCacheHash]) {\n\t\t\tlet probabilities = generateProbabilities(deckSection, frequency)\n\t\t\tconst hasAtLeastOnePrediction = probabilities.reduce(\n\t\t\t\t(accumulator, probability) => accumulator || probability !== 0,\n\t\t\t\tfalse\n\t\t\t)\n\n\t\t\t// If all the predictions are 0, just return an empty array\n\t\t\tprobabilities = hasAtLeastOnePrediction ? probabilities : []\n\n\t\t\tsetProbabilityCache({\n\t\t\t\t...probabilityCache,\n\t\t\t\t[probabilityCacheHash]: probabilities,\n\t\t\t})\n\n\t\t\treturn probabilities\n\t\t}\n\n\t\treturn probabilityCache[probabilityCacheHash];\n\t}\n\n\tconst resetGame = () => {\n\t\tsetDeck([SEASON_1_CITIES])\n\t\tsetDiscardPile([])\n\t\tsetInfectionLevel(0)\n\t\tsetProbabilityCache({})\n\t}\n\n\treturn (\n\t\t<Container>\n\t\t\t<Nav\n\t\t\t\tinfectionLevel={infectionLevel}\n\t\t\t\topenEpidemicModal={openEpidemicModal}\n\t\t\t\tresetGame={resetGame}\n\t\t\t/>\n\t\t\t<DeckAndDiscard\n\t\t\t\tdeck={deck}\n\t\t\t\tdiscardPile={discardPile}\n\t\t\t\topenEpidemicModal={openEpidemicModal}\n\t\t\t\tgetProbabilities={getProbabilitiesForDeckSectionAndFrequency}\n\t\t\t\tplayCityCard={playCityCard}\n\t\t\t/>\n\t\t\t<EpidemicModal\n\t\t\t\tdeck={deck}\n\t\t\t\tisVisible={isShowingEpidemicModal}\n\t\t\t\tclose={closeEpidemicModal}\n\t\t\t\ttriggerEpidemic={triggerEpidemic}\n\t\t\t/>\n\t\t</Container>\n\t)\n}\n\nexport default Game","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground: #20222f;\n\tpadding: 1em 1em;\n\tjustify-content: space-between;\n\talign-items: center;\n\tline-height: 1;\n`\n\nconst Logo = styled.div`\n\tcolor: #FACD01;\n\ttext-transform: uppercase;\n\tfont-style: italic;\n\tfont-weight: bold;\n\tfont-size: 2em;\n`\n\nconst CreatedBy = styled.span`\n\tcolor: #FFFFFF77;\n\tfont-size: 0.85em;\n\n\ta {\n\t\tcolor: #FFFFFFBB;\n\t\ttransition: color 0.2s;\n\n\t\t&:hover {\n\t\t\tcolor: #FFFFFFFF;\n\t\t}\n\t}\n`\n\nconst SiteNav = () => (\n\t<Container>\n\t\t<Logo>Pandemic Legacy Tracker</Logo>\n\t\t<CreatedBy>\n\t\t\tCreated by <a href=\"//github.com/armerpaul\" rel=\"noopener noreferrer\" target=\"_blank\">Paul Armer</a>\n\t\t</CreatedBy>\n\t</Container>\n)\n\nexport default SiteNav","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './Game';\nimport SiteNav from './SiteNav';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <SiteNav />\n    <Game />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}