(this["webpackJsonppandemic-legacy-tracker"]=this["webpackJsonppandemic-legacy-tracker"]||[]).push([[0],{17:function(t,n,e){t.exports=e(25)},22:function(t,n,e){},25:function(t,n,e){"use strict";e.r(n);var r,a=e(0),i=e.n(a),o=e(12),c=e.n(o),l=(e(22),e(6)),u=e(13),d=e(3),s=e(1),f=e(2),m=e(4),b=[2,2,2,3,3,4,4],p="red",g="blue",v="black",h="yellow",y=(r={},Object(m.a)(r,p,["Beijing","Seoul","Shanghai","Hong Kong","Tokyo","Osaka","Taipei","Bangkok","Ho Chi Minh City","Jakarta","Manila","Sydney"]),Object(m.a)(r,g,["San Francisco","Chicago","Montreal","New York","Atlanta","Washington","Madrid","London","Paris","Essen","Milan","St. Petersburg"]),Object(m.a)(r,v,["Los Angeles","Mexico City","Miami","Bogota","Lima","Sao Paulo","Buenos Aires","Santiago","Lagos","Kinshasa","Khartoum","Johannesburg"]),Object(m.a)(r,h,["Algiers","Cairo","Baghdad","Istanbul","Moscow","Tehran","Delhi","Kolkata","Chennai","Mumbai","Karachi","Riyadh"]),r),k=Object.entries(y).map((function(t){var n=Object(d.a)(t,2),e=n[0];return n[1].map((function(t){return{name:t,color:e,frequency:1}}))})).reduce((function(t,n){return[].concat(Object(l.a)(t),Object(l.a)(n))}),[]);function O(){var t=Object(s.a)(["\n\tdisplay: inline-block;\n\tbackground: transparent;\n\tfont-weight: bold;\n\ttext-transform: uppercase;\n\tborder: none;\n\tcolor: white;\n\ttext-decoration: underline;\n\tcursor: pointer;\n\ttransition: color 0.2s;\n\n\t&:hover {\n\t\tcolor: ",";\n\t}\n"]);return O=function(){return t},t}function j(){var t=Object(s.a)(["\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\twidth: calc(100% + 0.5em);\n\t\theight: 0;\n\t\tborder-top: 0.35em dashed black;\n\t\tposition: absolute;\n\t\ttransform: skew(45deg);\n\t\tleft: -0.25em;\n\t\ttop: 0;\n\t}\n\n\toutline: none;\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\toverflow: hidden;\n\tborder-radius: 0.15em;\n\tbackground: ",";\n\tborder: none;\n\tpadding: 0.75em 0.5em 0.45em;\n\tfont-weight: bold;\n\ttext-transform: uppercase;\n"]);return j=function(){return t},t}var E=f.a.button(j(),"#FACD01"),F=f.a.a(O(),"#FACD01");function w(){var t=Object(s.a)(["\n\tcolor: white;\n\tfont-weight: bold;\n\tfont-size: 1.25rem;\n\ttext-transform: uppercase;\n\tline-height: 1;\n\tmargin-right: 0.35em;\n"]);return w=function(){return t},t}function x(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n"]);return x=function(){return t},t}function C(){var t=Object(s.a)(["\n\tbackground: ",";\n\tcolor: white;\n"]);return C=function(){return t},t}function S(){var t=Object(s.a)(["\n\twidth: 2em;\n\theight: 2em;\n\tborder-radius: 50%;\n\tbackground: ","55;\n\tborder: 0.2em solid ","AA;\n\ttext-align: center;\n\tline-height: 2em;\n\tfont-weight: bold;\n\tcolor: ","AA;\n\tmargin-right: 0.35em;\n"]);return S=function(){return t},t}var A=f.a.div(S(),"#39AC6C","#39AC6C","#39AC6C"),P=Object(f.a)(A)(C(),"#39AC6C"),M=f.a.div(x()),D=f.a.div(w()),L=function(t){var n=t.level,e=t.openEpidemicModal;return i.a.createElement(M,null,i.a.createElement(D,null,"Infection Level"),b.map((function(t,e){return n===e?i.a.createElement(P,{key:e},t):i.a.createElement(A,{key:e},t)})),i.a.createElement(E,{onClick:e},"Trigger Epidemic"))};function q(){var t=Object(s.a)(["\n\tmargin-top: 0.75em;\n\tfont-size: 0.9em;\n\tcolor: #FFFFFF77;\n"]);return q=function(){return t},t}function z(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-end;\n\tfont-size: .8em;\n"]);return z=function(){return t},t}function B(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding: 0.5em;\n"]);return B=function(){return t},t}var T,I=f.a.div(B()),J=f.a.div(z()),V=f.a.div(q()),G=function(t){var n=t.resetGame,e=t.infectionLevel,r=t.openEpidemicModal,a=t.lastSaveDate,o=i.a.useState(),c=Object(d.a)(o,2),l=c[0],u=c[1];i.a.useEffect((function(){u(new Intl.DateTimeFormat("en",{timeStyle:"medium",dateStyle:"short"}))}),[]);var s=l&&a;return i.a.createElement(I,null,i.a.createElement(L,{level:e,openEpidemicModal:r}),i.a.createElement(J,null,i.a.createElement(F,{onClick:n},"Reset Game"),i.a.createElement(V,null,s?"Last saved: ".concat(l.format(a)):"Not saved yet")))};function K(){var t=Object(s.a)(["\n\tmargin-left: 1em;\n\tfont-size: 0.75em;\n\n\t&:nth-of-type(2) {\n\t\topacity: 0.7;\n\t}\n\n\t&:nth-of-type(3) {\n\t\topacity: 0.4;\n\t}\n"]);return K=function(){return t},t}function N(){var t=Object(s.a)(["\n\n"]);return N=function(){return t},t}function W(){var t=Object(s.a)(["\n\ttext-transform: uppercase;\n"]);return W=function(){return t},t}function H(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbackground: ","55;\n\tpadding: 0.75em 1em;\n\tcursor: pointer;\n\tcolor: white;\n\ttransition: background 0.2s;\n\n\t&:first-of-type {\n\t\tborder-top-left-radius: 0.25em;\n\t\tborder-top-right-radius: 0.25em;\n\t}\n\n\t&:last-of-type {\n\t\tborder-bottom-left-radius: 0.25em;\n\t\tborder-bottom-right-radius: 0.25em;\n\t}\n\n\t&:hover {\n\t\tbackground: ","99;\n\t}\n"]);return H=function(){return t},t}var R=(T={},Object(m.a)(T,p,"#d20404"),Object(m.a)(T,g,"#38359a"),Object(m.a)(T,v,"#000000"),Object(m.a)(T,h,"#d2ba00"),T),Y=f.a.div(H(),(function(t){var n=t.color;return R[n]}),(function(t){var n=t.color;return R[n]})),$=f.a.div(W()),_=f.a.div(N()),Q=f.a.span(K()),U=function(t){var n=t.city,e=t.probabilities,r=t.onClick,a=r?r.bind(null,n):null;return i.a.createElement(Y,{onClick:a,color:n.color},i.a.createElement($,null,n.name,i.a.createElement("span",null,n.frequency>1?"(".concat(n.frequency,")"):"")),i.a.createElement(_,null,e&&e.map((function(t,n){return i.a.createElement(Q,{key:n},t,"%")}))))};function X(){var t=Object(s.a)(["\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: calc(100% + 0.5em);\n\t\twidth: 0;\n\t\tborder-right: 0.35em dashed #FFFFFF22;\n\t\tposition: absolute;\n\t\ttransform: skew(0, 45deg);\n\t\tright: -1.1em;\n\t\ttop: 0;\n\t}\n\n\tposition: relative;\n\tmargin-right: 2em;\n"]);return X=function(){return t},t}function Z(){var t=Object(s.a)(["\n\tmargin-bottom: 0.55em;\n\tcolor: #FFFFFFAA;\n\ttext-transform: uppercase;\n"]);return Z=function(){return t},t}function tt(){var t=Object(s.a)(["\n\twidth: 20em;\n\tpadding: 0 1em;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return tt=function(){return t},t}function nt(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin-top: 1.5em;\n"]);return nt=function(){return t},t}var et=f.a.div(nt()),rt=f.a.div(tt()),at=f.a.div(Z()),it=Object(f.a)(rt)(X()),ot=function(t){var n=t.deck,e=t.discardPile,r=t.getProbabilities,a=t.playCityCard;return i.a.createElement(et,null,i.a.createElement(it,{key:"Discard Pile"},i.a.createElement(at,null,"Discard"),Object.values(e).map((function(t){return i.a.createElement(U,{key:t.name,city:t})}))),n.map((function(t,n){return i.a.createElement(rt,{key:n},i.a.createElement(at,null,0===n?"Top deck section":"Section ".concat(n+1)),t.map((function(t,e){return i.a.createElement(U,{key:e,city:t,probabilities:r(n,t.frequency),onClick:a})})))})))};function ct(){var t=Object(s.a)(["\n\tfont-size: 1em;\n\tpadding: 0.25em 0.5em;\n\tbackground: #FFFFFFCC;\n\tborder: 0;\n\tborder-radius: 0.2em;\n\tmargin-bottom: 1em;\n\n\t&:focus {\n\t\toutline: none;\n\t}\n"]);return ct=function(){return t},t}function lt(){var t=Object(s.a)(["\n\tfont-size: 1.5em;\n\ttext-transform: uppercase;\n\tcolor: white;\n\tmargin-bottom: 0.75em;\n"]);return lt=function(){return t},t}function ut(){var t=Object(s.a)(["\n\tmax-width: 30em;\n\tmax-height: 90vh;\n\twidth: 100%;\n\tbackground: #394756;\n\tborder-radius: 0.2em;\n\tpadding: 1em;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return ut=function(){return t},t}function dt(){var t=Object(s.a)(["\n\tbackground: #000000BB;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tz-index: -1;\n"]);return dt=function(){return t},t}function st(){var t=Object(s.a)(["\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding-top: ",";\n\ttransition: opacity 0.5s, z-index 0.5s, padding-top 0.4s;\n\topacity: ",";\n\tz-index: ",";\n"]);return st=function(){return t},t}var ft=f.a.div(st(),(function(t){return t.isVisible?"5vh":"0"}),(function(t){return t.isVisible?"1":"0"}),(function(t){return t.isVisible?"100":"-1"})),mt=f.a.div(dt()),bt=f.a.div(ut()),pt=f.a.div(lt()),gt=f.a.input(ct()),vt=function(t){var n=t.isVisible,e=t.close,r=t.deck,a=t.triggerEpidemic,o=i.a.useState(""),c=Object(d.a)(o,2),l=c[0],u=c[1],s=r[r.length-1],f=l?s.filter((function(t){return t.name.indexOf(l)>=0})):[],m=l&&0===f.length,b=function(){u(""),e()},p=function(t){a(t),b()};return i.a.createElement(ft,{isVisible:n},i.a.createElement(mt,{onClick:b}),i.a.createElement(bt,null,i.a.createElement(pt,null,"Epidemic!"),i.a.createElement(gt,{value:l,onChange:function(t){u(t.target.value)},placeholder:"Search for a city"}),m?i.a.createElement("span",null,"No cities found"):f.map((function(t){return i.a.createElement(U,{key:t.name,city:t,onClick:p})}))))};function ht(){var t=Object(s.a)(["\n\tbackground: #394756;\n\tpadding: 1em 1em 4em;\n"]);return ht=function(){return t},t}var yt=f.a.div(ht()),kt=function(t){var n=t.infectionLevel,e=t.resetGame,r=t.deck,a=t.discardPile,o=t.getProbabilitiesForDeckSectionAndFrequency,c=t.playCityCard,l=t.triggerEpidemic,u=t.lastSaveDate,s=i.a.useState(!1),f=Object(d.a)(s,2),m=f[0],b=f[1],p=function(){b(!0)};return i.a.createElement(yt,null,i.a.createElement(G,{infectionLevel:n,openEpidemicModal:p,resetGame:e,lastSaveDate:u}),i.a.createElement(ot,{deck:r,discardPile:a,openEpidemicModal:p,getProbabilities:o,playCityCard:c}),i.a.createElement(vt,{deck:r,isVisible:m,close:function(){b(!1)},triggerEpidemic:l}))},Ot=function(){var t=i.a.useState({}),n=Object(d.a)(t,2),e=n[0],r=n[1],a=i.a.useState([k]),o=Object(d.a)(a,2),c=o[0],s=o[1],f=i.a.useState({}),m=Object(d.a)(f,2),p=m[0],g=m[1],v=i.a.useState(0),h=Object(d.a)(v,2),y=h[0],O=h[1],j=i.a.useState(),E=Object(d.a)(j,2),F=E[0],w=E[1],x=b[y];i.a.useEffect((function(){var t=localStorage.getItem("PLT - Save Data");if(t){var n=JSON.parse(t);s(n.deck),g(n.discardPile),O(n.infectionLevel),w(n.date),r({})}else S()}),[]);var C=function(){var t={date:Date.now(),deck:c,discardPile:p,infectionLevel:y};localStorage.setItem("PLT - Save Data",JSON.stringify(t)),w(t.date)},S=function(){localStorage.setItem("PLT - Save Data",""),s([k]),g({}),O(0),r({}),w(null)},A=function(t,n){var e=c[t].indexOf(n);-1!==e?(c[t][e].frequency--,0===c[t][e].frequency&&c[t].splice(e,1),0===c[t].length&&c.splice(0,1),p[n.name]||(p[n.name]=Object(u.a)({},n,{frequency:0})),p[n.name].frequency++,g(p),s(c)):console.warn("".concat(n.name," not found in deck section ").concat(t))},P=function(t){for(var n=c[t],e=0,r=0;r<n.length;r++){e+=n[r].frequency}return e};return i.a.createElement(kt,{infectionLevel:y,resetGame:S,deck:c,discardPile:p,lastSaveDate:F,getProbabilitiesForDeckSectionAndFrequency:function(t,n){var r="".concat(t,"-").concat(n);if(!e[r]){var a=function(t,n){for(var e=0,r=[],a=0,i=P(t),o=0;o<t;o++)e+=P(o);for(;r.length<3&&i>0;)if(a+x<=e)r.push(0),a+=x;else{if(i<x)r.push(100);else{for(var c=1,l=0;l<x;l++)c*=(i-l-n)/(i-l);var u=Math.min(1-c,1),d=Math.pow(10,2);r.push(Math.round(100*u*d)/d)}if(100===r[r.length-1])break;i-=x}return r}(t,n),i=a.reduce((function(t,n){return t||0!==n}),!1);return a=i?a:[]}return e[r]},playCityCard:function(t){A(0,t),r({}),C()},triggerEpidemic:function(t){t||console.error("city required to trigger epidemic"),A(c.length-1,t);var n=Object.values(p);s([n].concat(Object(l.a)(c))),O(y+1),g({}),r({}),C()}})};function jt(){var t=Object(s.a)(["\n\tcolor: #FFFFFF77;\n\tfont-size: 0.85em;\n\n\ta {\n\t\tcolor: #FFFFFFBB;\n\t\ttransition: color 0.2s;\n\n\t\t&:hover {\n\t\t\tcolor: #FFFFFFFF;\n\t\t}\n\t}\n"]);return jt=function(){return t},t}function Et(){var t=Object(s.a)(["\n\tcolor: #FACD01;\n\ttext-transform: uppercase;\n\tfont-style: italic;\n\tfont-weight: bold;\n\tfont-size: 2em;\n"]);return Et=function(){return t},t}function Ft(){var t=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground: #20222f;\n\tpadding: 1em 1em;\n\tjustify-content: space-between;\n\talign-items: center;\n\tline-height: 1;\n"]);return Ft=function(){return t},t}var wt=f.a.div(Ft()),xt=f.a.div(Et()),Ct=f.a.span(jt()),St=function(){return i.a.createElement(wt,null,i.a.createElement(xt,null,"Pandemic Legacy Tracker"),i.a.createElement(Ct,null,"Created by ",i.a.createElement("a",{href:"//paularmer.me",rel:"noopener noreferrer",target:"_blank"},"Paul Armer")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(St,null),i.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.8b938a19.chunk.js.map